<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>拖拽</title>


  <style>
    * {
      margin: 0;
      padding: 0;
    }

    #box {
      width: 100px;
      height: 100px;
      background: darkblue;
      border-radius: 50%;
      cursor: move;
      position: absolute;
      left: 0;
      top: 0;
    }
  </style>
</head>



<body>
  <div id="box" style="left: 50%;top:50%"></div>


</body>



</html>
<script>
  let box = document.getElementById('box');
  box.onmousedown = function (event) {
    /*
     *   问题：如何保持鼠标指针和被拖拽的元素相对位置不变
     *
     *   当我们选中文字，并进行拖拽时，浏览器默认会尝试将文字在搜索引擎中搜索，
     *       这是浏览器的默认行为，这个行为的存在会影响到拖拽的功能
     * */
    event.preventDefault();
    // 计算水平方向的偏移
    let left = event.clientX - box.offsetLeft;
    // 计算垂直方向的偏移
    let top = event.clientY - box.offsetTop;

    // 解决鼠标丢失的问题 1、this.setCapture() IE 火狐 有这个方法；谷歌没有
    // 把move 事件绑定到 根节点上；
    document.onmousemove  = function (event) {
      box.style.left = event.clientX - left  +'px';
      box.style.top = event.clientY - top +'px';
    };

    document.onmouseup = function () {
      // 取消鼠标移动的相关事件
      document.onmousemove = null;
      document.onmouseup = null;
    }
  }




  /*
  拖拽的工作原理： 根据鼠标坐标值 更改更改目标元素的 left和top值
  由此可知， 目标元素需要绝对定位


  */
</script>