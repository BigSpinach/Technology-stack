<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <h1>async 和 await的使用</h1>
  <!-- 
		1. async修饰的函数
					函数的返回值为promise对象
					Promise实例的结果由async函数执行的返回值决定

		2. await表达式
					await右侧的表达式一般为Promise实例对象, 但也可以是其它的值
					(1).如果表达式是Promise实例对象, await后的【返回值】是【promise成功】的值
					(2).如果表达式是其它值, 直接将此值作为await的返回值
		
		3. 注意:
				await必须写在async函数中, 但async函数中可以没有await
				如果await的Promise实例对象失败了, 就会抛出异常, 需要通过try...catch来捕获处理
-->
</body>
<script>
  const p1 = new Promise((resolve, reject) => {
    setTimeout(() => {
      resolve('a')
    }, 1000)
  });
  const p2 = new Promise((resolve,reject)=>{
		setTimeout(()=>{
			reject('一些错误')
		},2000)
	});
	const p3 = new Promise((resolve,reject)=>{
		setTimeout(()=>{
			resolve('c')
		},4000)
	});

//加 ; ~ ! @ 都可以，目的 与前边代码隔绝
  ~(async()=>{
    try{
      const result1 = await p1;
      console.log(result1);
      const result2 = await p2;
      console.log(result2);
      const result3 = await p3;
      console.log(result3);
    }catch(error){
      console.log(error);
    }
  })();

</script>

</html>