# 操作系统


## 1. 引论

> 操作系统是配置在计算机硬件上的第一层软件，是对硬件系统的第一次扩充。 


### 1.1 操作系统的概念

>   随着计算机技术的迅速发展，以软件为核心的信息产业对人类经济、政治、文化产生了深远的影响。信息化水平的高低，已经成为衡量一个国家综合国力的重要标志。信息的收集、处理和服务是信息产业的核心内容，它们都离不开软件。在信息技术中，微电子是基础，计算机及通信设施是载体，而软件是核心。软件是计算机的灵魂，没有软件就没有计算机应用，也就没有信息化。信息社会需要众多千变万化的软件系统，因此，软件的研究和开发就变得极其重要。在众多的软件系统中有一类非常重要的软件，为建立更加丰富的应用环境奠定了重要基础，它就是操作系统。 




#### 1.1.1 计算机系统
> 计算机系统就是按人的要求接收和存储信息，自动地进行数据处理和计算，并输出结果信息的系统。

    1. 计算机系统的组成
        - 硬件（工作实体）+软件（程序和文件）
    2. 计算机硬件
        - 主要是完成信息变换、信息存储、信息传送和信息处理等功能，它为软件提供具体实现的基础。
        - 计算机硬件系统主要由运算器、内存储器、控制器、I/O控制系统、辅助存储设备等功能部件组成。 
        
    3.计算机软件
       - 【计算机软件】是指安装在计算机系统中的程序和有关的文件。
       -【程序】是对计算任务的处理对象和处理规则的描述；
       - 【文件】是为了便于了解程序所需的资料说明。程序必须装入计算机内部才能工作；
       - 文件一般是给人看的，不一定装入计算机。程序作为一种具有逻辑结构的信息，精确而完整地描述了计算任务中的处理对象和处理规则。这一描述还必须通过相应的实体才能体现。记载上述信息的实体就是硬件。


​       按照应用的观点，软件分为
​       1.系统软件----最靠近硬件的一层，处理二进制（计算机可识别的低级语言程序）
​       2.支撑软件----操作系统（支撑环境+各种接口软件+工具组）
​       3.应用软件----各种app

#### 1.1.2 操作系统简介

    【地位】   
    操作系统是计算机系统中硬、软件资源的总指挥部；操作系统是软件技术的核心，是软件的基础运行平台。 
    【定义】   
    操作系统是计算机系统中的系统软件，是能有效地组织和管理计算机系统中的硬件和软件资源，合理地组织计算机工作流程，控制程序的执行，并向用户提供各种服务功能，使得用户能够方便地使用计算机，使整个计算机系统能高效运行的一组程序模块的集合。 
    
    有效+合理+方便
    
    【作用】
    + 操作系统要管理计算机系统中的各种资源，包括硬件及软件资源。
    + 操作系统要为用户提供良好的界面。


​    
#### 1.1.3 操作系统的目标
+ 方便
+ 有效
+ 可扩充
+ 开放


### 1.2 操作系统的形成和发展

#### 1.2.1 操作系统的形成
 1. 无操作系统时的计算机系统
    > 1. 人工操作方式(用户独占全机，处理机等人)
    > 2. 脱机（联机）I/O方式


 2. 单道批处理操作系统
    
    【描述】：用户一次拿一个作业调入内存，然后使用处理机和系统资源，一次处理一个作业，处理完这个作业再处理下一个作业。
    
    【目的】批处理系统旨在提高系统资源的利用率和系统吞吐量。
    > 
    【监督程序】
    
    【作业】
    + 从输入开始到输出结束，用户要求计算机所做的全部工作称为作业
    + 作业由程序、数据和作业控制说明书组成。
    > 1. 批处理系统的处理过程  
    > 2. 单道批处理系统的特征（自动，顺序，单道）


 3. 多道批处理操作系统

    【描述】：用户一次性提交多个作业，存放在**后备队列**中，由作业调度程序按照一定的算法从后备队列中拿出几个作业调入内存，使他们共享处理机和系统中其他的资源。

 【目的】提高处理机利用率，提高内存和I/O设备利用率，增加系统吞吐量

  【作业调度程序】按照一定的【算法】来使用**共享处理机**和资源

    1. 多道批处理系统的基本概念。
    2. 多道批处理系统的基本特征。（多道，无序，调度）

 4. 分时系统
    
    

    【产生原因】：用户的需要。
    
    1. （多用户）人机交互
    2. 共享主机
    3. 便于用户上机
    
    
    
    【定义】：分时系统是指一台主机上连接了多个带有显示器和键盘的终端，同时允许多个用户共享主机中的资源，每个用户都可通过自己的终端以交互方式使用计算机。
    
    
    
    
    
    【关键性问题】
    
    	1. 及时接收（多路卡、缓冲区）
    	2. 及时处理（所有的用户程序必须都直接进入内存，在不长的时间内，所有的程序都运行一次）
    
    
    
    【分时系统的实现方法】
    
    		1. 程序直接进入内存（磁盘里的程序调入内存后才能运行）
    		2. 规定每一个程序只运行一个很短的时间片段，在很短时间内，将所有的用户程序都执行一遍，达到用户与自己的程序及时交互的效果。（不允许一个程序长期占用处理机）
    
    
    
    单道分时系统
    
    ​	【描述】：多个程序都先存储在外存上，内存上一次值运行（驻留）一个程序，每当内存上的程序执行一段时间后，将内存中的暂停并调出，然后从外存中拿一个其他程序到内存上执行，在一定的时间内，将外存中的所有程序都在内存上执行一遍，依次循环。
    
    
    
    
    
    
    
    具有“前台”和“后台”的分时系统
    
    【描述】： 将内存分为“前台区”和“后台区”，前台区存放时间片‘调入’和‘调出’程序，后台区存放批处理作业，仅当 前台区‘调入/调出’的时间空闲期运行‘后台区’的程序，或者前台区已没有程序时才运行后台区的程序。
    
    
    
    多道分时系统
    
    【描述】：内存中同时存放多道程序，每到程序无固定位置，如果程序都小，内存中就可以多装几道程序，然后由系统把已具备运行条件的程序排成一个队列，使他们轮流的获得一个时间片来运行。
    
    由于切换都在内存上执行，不用花销‘调入/调出’的开销。



分时系统的特征：（主要对比多道批处理）

	1. 多路性（宏观上是多个用户同时工作，共享系统资源，微观上，每个程序都轮流运行在一个时间片上）———-多个用户同时使用
	2. 独立性———–每个用户独占一个终端，彼此独立操作（独占主机的feel）
	3. 及时性———-用户请求在**很短时间内**都会得到响应（通常为2~3s）
	4. 交互性——–用户与系统进行广泛的交流






 5. 实时系统



【实时控制】通常把要求进行实时控制的系统统称为实时控制系统。（天气预报、飞机导弹等）

【实时信息处理】 飞机订票系统、情报检索系统等


​    

#### 1.2.2 操作系统的进一步发展



1. 微机操作系统

   单用户单任务 MS-DOS
   单用户多任务 Windows Linux
   多用户多任务 UNIX

2. 多处理机操作系统

3. 网络操作系统

4. 分布式操作系统

5. 嵌入式操作系统


#### 1.2.3 推动操作系统发展的动力

+ 不断提高计算机资源利用率的需要
+ 方便用户
+ 器件的不断更新
+ 计算机结构的不断发展





### 1.3 研究操作系统的几种观点





#### 1.3.1 软件的观点





#### 1.3.2 计算机系统资源管理的观点





#### 1.3.3 进程的观点





#### 1.3.4 用户与计算机硬件系统之间接口的观点 





#### 1.3.5 虚拟器的观点





#### 1.3.6 服务提供者的观点







### 1.4 操作系统的功能与特征





#### 1.4.1 功能

管理软硬件资源，提供用户接口

+ 处理机管理功能—进程控制，进程同步，进程通信，调度（作业调度和进程调度）

   1. 进程控制

   2. 进程同步（对诸进程进行协调）

      + 进程互斥方式（对临界资源采用互斥方式）【临界资源加上锁】

      + 进程同步方式（同步机制对诸程序执行次序进行协调）

   3. 进程通信
      实现相互合作进程之间的信息交换

      + 直接通信方式—源进程利用发送命令直接将消息挂到目标进程的消息队列上
      + 间接通信方式——-邮箱

   4. 调度
      
      
   
+ 存储器管理功能—内存分配，内存保护，地址映射，内存扩充（地址映射：将逻辑地址转换为物理地址。）

 1. 内存分配
    静态分配：作业所要求的内存空间是在作业装入的时候决定的，在作业装入后的整个运行期间不能够申请新的空间 不能够改变位置

    动态分配：作业所要求的内存空间在装入的时候决定但允许增加新的空间，允许移动.

 2. 内存保护

 3. 地址映射

 4. 内存扩充





+ 文件管理功能—-文件存储空间管理，目录管理，文件读写管理及保护

​		计算机系统中把程序和数据以文件的形式存储在磁盘或者是磁带上

​		文件存储空间管理、目录管理、文件读写管理、目录控制

+ 设备管理功能—-缓冲管理，设备分配，设备处理

​	*完成用户提出的I/O请求，为用户分配I/O设备，提高处理机和I/O设备的利用率，提高I/O速度，方便用户使用I/O*

​	*缓冲管理、设备回收、设备处理程序、设备独立性和虚拟设备*





+ 用户接口—用户接口和程序接口。（系统调用，是用户程序取得操作系统服务的唯一途径）

  命令接口、程序接口、图形接口





#### 1.4.2 操作系统的特征







### 1.5操作系统的结构设计





### 1.5.1  传统操作系统结构





### 1.5.2  现代操作系统结构





















#  2. 操作系统的硬件环境



